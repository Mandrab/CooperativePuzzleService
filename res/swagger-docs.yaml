openapi: 3.0.0

info:
  description: >
    This API allow to connect to the collaborative puzzle service. Actually it
    is not hosted anywhere, but the project is available for try on
    [GitHub](https://github.com/Mandrab/pcd-03-2). TODO link.
  version: "1.0.0-oas3"
  title: Collaborative Puzzle Game - RESTful API
  contact:
    email: paolobaldini01@gmail.com
  license:
    name: GPL-2.0
    url: 'https://www.gnu.org/licenses/old-licenses/gpl-2.0.html'

servers:
  - url: 'https://virtserver.swaggerhub.com/pb.mandrab/test/1.0.0'

tags:
  - name: puzzle
    description: Join cooperative puzzle to play

paths:

  '/puzzle':
    post:
      operationId: createPuzzle
      tags:
        - puzzle
      summary: Create a new game session on which play
      responses:
        '200':
          description: Return an object containing the ID, image URI and grid-size (i.e., rows and columns) of the created puzzle
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Puzzle'
        # TODO impossibile creare
          #links:
          #  getPuzzle:
          #    operationId: getPuzzle
          #    parameters:
          #      puzzleID: '$response.body#/puzzleID'
          #    description: >
          #      The `puzzleID` value returned in the response can be used as
          #      the `puzzleID` parameter in `GET /puzzle/{puzzleID}`.
    get:
      operationId: getPuzzles
      tags:
        - puzzle
      summary: Return a collection of all the open game-sessions' IDs
      responses:
        '200':
          description: Return a json-array containing all the puzzle-sessions' IDs
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  '/puzzle/{puzzleID}':
    get:
      tags:
        - puzzle
      summary: Access information of an in-game puzzle
      parameters:
        - in: path
          name: puzzleID
          required: true
          description: ID of the puzzle of which take information
          schema:
            type: string
      responses:
        '200':
          description: Return information about the puzzle, including\:<br/>
            - image URL<br/>
            - size of the puzzle (i.e., columns and rows)<br/>
            - positions of all the tiles
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PuzzleInfo'
        '404':
          description: Puzzle not found

components:

  schemas:
    Puzzle:
      type: object
      properties:
        puzzleID:
          type: string
        imageURL:
          type: string
        columns:
          type: integer
        rows:
          type: integer
      description: An object containing the ID, image URI and grid-size (i.e., rows and columns) of the created puzzle.
      
    PuzzleInfo:
      type: object
      properties:
        imageURL:
          type: string
        columns:
          type: integer
        rows:
          type: integer
        tiles:
          type: array
          items:
            $ref: '#/components/schemas/Tile'
      description: An object containing information about image URI, grid-size (i.e., rows and columns) and tiles of the puzzle.

    Tile:
      type: object
      properties:
        tileID:
          type: integer
        column:
          type: integer
        row:
          type: integer
      description: An object containing information about a puzzle tile. Specifically it contains ID and actual position (i.e., column and row) of the tile.